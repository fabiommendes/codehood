$schema: "https://json-schema.org/draft/2020-12/schema"
# $id: "https://cdn.jsdelivr.net/gh/mdq-format/schema@v0.1/schema.json"

#
# Root document
#
title: Exam
description: A MDQ Exam represents a document with a sequence of questions.
type: object
additionalProperties: false
required: [id, questions]
properties:
  id:
    description: A (ideally) unique identifier for the question set
    type: string
    minLength: 1

  title:
    description: A name for the collection of questions
    type: string
    default: ""

  description:
    description: Some additional description for the exam
    type: string
    default: ""

  preamble:
    description: An introductory text displayed to students
    type: string
    default: ""

  tags:
    description: Some arbitrary tags that can be attached to the exam.
    type: array
    items:
      type: string
    uniqueItems: true
    default: []

  options:
    description: A configuration object that define how questions are graded and analized.
    type: object
    $ref: "base-options"

  questions:
    description: List of questions
    type: array
    items:
      $ref: "#/$defs/question"

    minItems: 1

$defs:
  question:
    description: A question in a question set or exam.
    oneOf:
      - $ref: "essay"
      - $ref: "associative"
      - $ref: "fill-in"
      - $ref: "multiple-choice"
      - $ref: "multiple-selection"
      - $ref: "true-false"
      - $ref: "code-io"
      - $ref: "unit-test"

  private-keys:
    description: >-
      A list of private keys that are stripped from the document before showing it to students. 
      This defines a different schema since some of those keys are required.
    enum:
      - correct
      - grade
      - answer-key
      - comment
      - feedback
      - shuffle
      - fixed
      - examples
      - conf
